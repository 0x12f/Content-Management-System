{% block editor %}
    {% set editorId = random() %}

    {% include 'cup/form.twig' with {
        'label': label,
        'type': 'textarea',
        'name': name,
        'args': args|merge({'id': 'wysiwygeditor-' ~ editorId})
    } %}

    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', () => {
            $('#wysiwygeditor-{{ editorId }}')
                .froalaEditor({
                    width: '100%',
                    height: '300',
                    language: 'ru',

                    htmlRemoveTags: [],
                    htmlAllowedAttrs: ['.*'],

                    toolbarButtons: ['fullscreen', 'bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', '|', 'fontFamily', 'fontSize', 'color', 'inlineClass', 'inlineStyle', 'paragraphStyle', 'lineHeight', '|', 'paragraphFormat', 'align', 'formatOL', 'formatUL', 'outdent', 'indent', 'quote', '-', 'insertLink', 'insertImage', 'insertVideo', 'embedly', 'insertFile', 'insertTable', '|', 'emoticons', 'fontAwesome', 'specialCharacters', 'insertHR', 'selectAll', 'clearFormatting', '|', 'print', 'spellChecker', 'html', '|', 'undo', 'redo'],

                    fileMaxSize: 1024 * 1024 * 3,
                    fileUploadMethod: 'POST',
                    fileUploadParam: 'file',
                    fileUploadParams: {'path_only': true},
                    fileUploadURL: '/file/upload',

                    imageMaxSize: 5 * 1024 * 1024,
                    imageAllowedTypes: ['jpeg', 'jpg', 'png'],
                    imageUploadMethod: 'POST',
                    imageUploadParam: 'image',
                    imageUploadParams: {'path_only': true},
                    imageUploadURL: '/file/upload',

                    videoAllowedProviders: ['youtube', 'vimeo'],
                    videoMaxSize: 1024 * 1024 * 15,
                    videoAllowedTypes: ['mp4', 'webm'],
                    videoUploadMethod: 'POST',
                    videoUploadParam: 'video',
                    videoUploadParams: {'path_only': true},
                    videoUploadURL: '/file/upload',
                })
            ;
        });
    </script>
{% endblock %}
